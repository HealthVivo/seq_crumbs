#!/usr/bin/env python
'''
Created on 2012 eka 22

@author: peio
'''
import sys

from crumbs.utils import main
from crumbs.sample import (sample_setup_argparse, sample_parse_args)
from crumbs.seqio import write_seqrecords, guess_format, read_seqrecords


def _get_first_seqs(fhands, num_seqs):
    'It gets the first num_seqs sequences from the file'
    counter = 0
    for seq in read_seqrecords(fhands):
        yield seq
        counter += 1
        if counter >= num_seqs:
            break


def get_seqs():
    'The main function of the head binary'
    parser = sample_setup_argparse()
    args = sample_parse_args(parser)

    in_fhands = args['in_fhands']
    out_fhand = args['out_fhand']
    num_seqs = args['num_seqs']

    seqs = _get_first_seqs(in_fhands, num_seqs)

    write_seqrecords(out_fhand, seqs, guess_format(in_fhands[0]))

if __name__ == '__main__':
    sys.exit(main(get_seqs))
